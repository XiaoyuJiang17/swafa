schema: '2.0'
stages:
  online_fa:
    cmd: python experiments/online_fa.py --results-output-path experiments/data/online_fa_results.parquet
    deps:
    - path: experiments/online_fa.py
      md5: 4a3494e133bea04b53964d50de4021bf
      size: 21693
    - path: swafa/fa.py
      md5: cc1b7a6b51d948518febb978d5ecf7dc
      size: 15158
    params:
      params.yaml:
        online_fa.experiments:
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 100
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 200
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 500
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 1000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 2000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 5000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 10000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 20000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 50000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 0
          - 1
          n_samples: 100000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 100
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 200
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 500
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 1000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 2000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 5000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 10000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 20000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 50000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 0
          - 1
          n_samples: 100000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 100
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 200
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 500
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 1000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 2000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 5000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 10000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 20000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 50000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples: 100000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 100
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 200
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 500
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 1000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 2000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 5000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 10000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 20000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 50000
        - observation_dim: 1000
          latent_dim: 100
          spectrum_range:
          - 1
          - 10
          n_samples: 100000
        online_fa.gradient_optimiser_kwargs:
          lr: 0.001
        online_fa.init_factors_noise_std: 0.1
        online_fa.n_trials: 10
    outs:
    - path: experiments/data/online_fa_results.parquet
      md5: b0a23d2526f735d607bfd5e106ddeec6
      size: 33677
  online_fa_analysis:
    cmd: python experiments/online_fa_analysis.py --results-input-path experiments/data/online_fa_results.parquet
      --analysis-output-dir experiments/data/online_fa_analysis
    deps:
    - path: experiments/data/online_fa_results.parquet
      md5: b0a23d2526f735d607bfd5e106ddeec6
      size: 33677
    - path: experiments/online_fa_analysis.py
      md5: c9b52283ef20b4b894712b7f976f39e5
      size: 7475
    params:
      params.yaml:
        online_fa_analysis.metric_columns:
        - covar_norm
        - covar_distance_sklearn
        - covar_distance_online_gradient
        - covar_distance_online_em
    outs:
    - path: experiments/data/online_fa_analysis
      md5: c1ff5536c235df88f827bf6a3824b36a.dir
      size: 268918
      nfiles: 12
