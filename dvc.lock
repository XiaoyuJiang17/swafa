schema: '2.0'
stages:
  online_fa:
    cmd: python experiments/online_fa.py --results-output-path experiments/data/online_fa_results.parquet
    deps:
    - path: experiments/online_fa.py
      md5: 9132c1a9a71e54e51569b6292a5cb74f
      size: 31007
    - path: swafa/fa.py
      md5: cc1b7a6b51d948518febb978d5ecf7dc
      size: 15158
    params:
      params.yaml:
        online_fa.experiments:
        - observation_dim: 100
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples:
          - 100
          - 200
          - 500
          - 1000
          - 2000
          - 5000
          - 10000
          - 20000
          - 50000
          - 100000
        - observation_dim: 100
          latent_dim: 10
          spectrum_range:
          - 1
          - 100
          n_samples:
          - 100
          - 200
          - 500
          - 1000
          - 2000
          - 5000
          - 10000
          - 20000
          - 50000
          - 100000
        - observation_dim: 100
          latent_dim: 10
          spectrum_range:
          - 1
          - 10000
          n_samples:
          - 100
          - 200
          - 500
          - 1000
          - 2000
          - 5000
          - 10000
          - 20000
          - 50000
          - 100000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10
          n_samples:
          - 100
          - 200
          - 500
          - 1000
          - 2000
          - 5000
          - 10000
          - 20000
          - 50000
          - 100000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 100
          n_samples:
          - 100
          - 200
          - 500
          - 1000
          - 2000
          - 5000
          - 10000
          - 20000
          - 50000
          - 100000
        - observation_dim: 1000
          latent_dim: 10
          spectrum_range:
          - 1
          - 10000
          n_samples:
          - 100
          - 200
          - 500
          - 1000
          - 2000
          - 5000
          - 10000
          - 20000
          - 50000
          - 100000
        online_fa.gradient_optimiser_kwargs:
          lr: 0.001
        online_fa.init_factors_noise_std: 0.1
        online_fa.n_trials: 10
    outs:
    - path: experiments/data/online_fa_results.parquet
      md5: 9cafc516965c6fe515ef3c70640dd889
      size: 69603
  online_fa_analysis:
    cmd: python experiments/online_fa_analysis.py --results-input-path experiments/data/online_fa_results.parquet
      --analysis-output-dir experiments/data/online_fa_analysis
    deps:
    - path: experiments/data/online_fa_results.parquet
      md5: 9cafc516965c6fe515ef3c70640dd889
      size: 69603
    - path: experiments/online_fa_analysis.py
      md5: 4027da8154524acd632d7791b7ea2067
      size: 11850
    outs:
    - path: experiments/data/online_fa_analysis
      md5: 033ed88ff767021e636a8db14f59ba54.dir
      size: 1685455
      nfiles: 36
